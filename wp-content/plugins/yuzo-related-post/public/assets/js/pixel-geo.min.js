(function(e,o){"object"==typeof exports&&"undefined"!=typeof module?module.exports=o():"function"==typeof define&&define.amd?define(o):(e=e||self,function(){var n=e.Cookies,r=e.Cookies=o();r.noConflict=function(){return e.Cookies=n,r}}())})(this,function(){"use strict";function e(e){for(var o=1;o<arguments.length;o++){var n=arguments[o];for(var r in n)e[r]=n[r]}return e}function o(r,t){function i(o,n,i){if("undefined"!=typeof document){i=e({},t,i),"number"==typeof i.expires&&(i.expires=new Date(Date.now()+864e5*i.expires)),i.expires&&(i.expires=i.expires.toUTCString()),n=r.write(n,o),o=encodeURIComponent(o).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var a="";for(var s in i)if(i[s]&&(a+="; "+s,!0!==i[s]))try{a+="="+i[s].split(";")[0]}catch(e){console.log("err-cookie: https://github.com/js-cookie/js-cookie");continue}return document.cookie=o+"="+n+a}}function a(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var o=document.cookie?document.cookie.split("; "):[],t={},i=0;i<o.length;i++){var a=o[i].split("="),s=a.slice(1).join("=");'"'===s[0]&&(s=s.slice(1,-1));try{var c=n.read(a[0]);if(t[c]=r.read(s,c),e===c)break}catch(e){}}return e?t[e]:t}}return Object.create({set:i,get:a,remove:function(o,n){i(o,"",e({},n,{expires:-1}))},withAttributes:function(n){return o(this.converter,e({},this.attributes,n))},withConverter:function(n){return o(e({},this.converter,n),this.attributes)}},{attributes:{value:Object.freeze(t)},converter:{value:Object.freeze(r)}})}var n={read:function(e){return e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},r=o(n,{path:"/"});return r});var pf_geo=function(){this.helpers={get_cookie:function(e){return Cookies.get(e)}.bind(this),set_cookie:function(e,o,n,r="",t,i){Cookies.set(e,o,{expires:n})}.bind(this),remove_cookie:function(e,o,n,r){Cookies.remove(e)}},this.funcs={getBrowserInfo:{options:[],header:[navigator.platform,navigator.userAgent,navigator.appVersion,navigator.vendor,window.opera],dataos:[{name:"Windows Phone",value:"Windows Phone",version:"OS"},{name:"Windows",value:"Win",version:"NT"},{name:"iPhone",value:"iPhone",version:"OS"},{name:"iPad",value:"iPad",version:"OS"},{name:"Kindle",value:"Silk",version:"Silk"},{name:"Android",value:"Android",version:"Android"},{name:"PlayBook",value:"PlayBook",version:"OS"},{name:"BlackBerry",value:"BlackBerry",version:"/"},{name:"Macintosh",value:"Mac",version:"OS X"},{name:"Linux",value:"Linux",version:"rv"},{name:"Palm",value:"Palm",version:"PalmOS"}],databrowser:[{name:"Chrome",value:"Chrome",version:"Chrome"},{name:"Firefox",value:"Firefox",version:"Firefox"},{name:"Safari",value:"Safari",version:"Version"},{name:"Internet Explorer",value:"MSIE",version:"MSIE"},{name:"Opera",value:"Opera",version:"Opera"},{name:"BlackBerry",value:"CLDC",version:"CLDC"},{name:"Mozilla",value:"Mozilla",version:"Mozilla"}],init:function(){var e=this.header.join(" "),o=this.matchItem(e,this.dataos),n=this.matchItem(e,this.databrowser);return{os:o,browser:n}},matchItem:function(e,o){var n,r,t,i,a,s=0,c=0;for(s=0;s<o.length;s+=1)if(n=new RegExp(o[s].value,"i"),t=n.test(e),t){if(r=new RegExp(o[s].version+"[- /:;]([\\d._]+)","i"),i=e.match(r),a="",i&&i[1]&&(i=i[1]),i)for(i=i.split(/[._]+/),c=0;c<i.length;c+=1)a+=0===c?i[c]+".":i[c];else a="0";return{name:o[s].name,version:parseFloat(a)}}return{name:"unknown",version:0}},printInfo:function(){var e=this.init(),o="os.name="+e.os.name+"|os.version="+e.os.version+"|browser.name="+e.browser.name+"|browser.version="+e.browser.version+"|navigator.userAgent="+navigator.userAgent+"|navigator.appVersion="+navigator.appVersion+"|navigator.platform="+navigator.platform+"|navigator.vendor="+navigator.vendor+"|";return o}},device_detector:function(){var e=navigator.userAgent.toLowerCase(),o=function(o){return void 0!==o&&(e=o.toLowerCase()),/(ipad|tablet|(android(?!.*mobile))|(windows(?!.*phone)(.*touch))|kindle|playbook|silk|(puffin(?!.*(IP|AP|WP))))/.test(e)?"tablet":/(mobi|ipod|phone|blackberry|opera mini|fennec|minimo|symbian|psp|nintendo ds|archos|skyfire|puffin|blazer|bolt|gobrowser|iris|maemo|semc|teashark|uzard)/.test(e)?"phone":"desktop"};return{device:o(),detect:o,isMobile:"desktop"!=o(),userAgent:e}}.bind(this),get_country_code:function(e="wp_country"){var o=e,n=this.helpers.get_cookie(o);if(!n||void 0===n){var r=this.helpers;jQuery.ajax({url:"https://json.geoiplookup.io",dataType:"json",success:function(e){return r.set_cookie(o,e.country_code,2592e3),e.country_code},error:function(e,o,n){console.log("Status: "+o),console.log("Error: "+n),console.log(e)}})}return n}.bind(this),country_validate:function(e=""){if(!e)return!0;if(e.includes("all")){if(e.includes("all"))return!0}else{var o=this.get_country_code();if(o&&e.includes(o))return!0}return!1}},this.validator={get_device:function(){var e=this.funcs.device_detector();return"desktop"==e.device?"d":"tablet"==e.device?"t":"m"}.bind(this)},this.actions={save_geo:function(e={}){e.nonce=e.nonce||"",e.action=e.action||"",e.post_id=e.post_id||"",e.url=e.url||"",e.where_is=e.where_is||"",e.ajaxurl=e.ajaxurl||"",e.others=e.others||{};var o=this.funcs.getBrowserInfo.printInfo(),n=this.validator.get_device();jQuery.ajax({type:"POST",url:e.ajaxurl,data:{action:e.action,post_id:parseInt(e.post_id),url:e.url,where_is:e.where_is,browser_details:o,device:n,nonce:e.nonce,others:e.others},success:function(e){console.log("result: ",e)},error:function(e,o){console.log("Sorry, there was a problem! ",e,o)},complete:function(e,o){}})}.bind(this),save_others:function(e={}){e.nonce=e.nonce||"",e.action=e.action||"",e.post_id=e.post_id||"",e.ajaxurl=e.ajaxurl||"",e.others=e.others||{},jQuery.ajax({type:"POST",url:e.ajaxurl,data:{action:e.action,post_id:parseInt(e.post_id),nonce:e.nonce,others:e.others},success:function(e){console.log(e)},error:function(e,o){console.log("Sorry, there was a problem! ",e,o)},complete:function(e,o){}})}.bind(this)}};