(function($,window,document,undefined){"use strict";var PF=PF||{};PF.vars={onloaded:!1,$body:$("body"),$window:$(window),$document:$(document),is_rtl:$("body").hasClass("rtl"),code_themes:[]},PF.funcs={},PF.helper={uid:function(e){return(e||"")+Math.random().toString(36).substr(2,9)},preg_quote:function(e){return(e+"").replace(/(\[|\-|\])/g,"\\$1")},name_nested_replace:function(e,t){var n=new RegExp("("+PF.helper.preg_quote(t)+")\\[(\\d+)\\]","g");e.find(":radio").each(function(){(this.checked||this.orginal_checked)&&(this.orginal_checked=!0)}),e.each(function(e){$(this).find(":input").each(function(){this.name=this.name.replace(n,t+"["+e+"]"),this.orginal_checked&&(this.checked=!0)})})},debounce:function(e,t,n){var i;return function(){var a=this,o=arguments,r=function(){i=null,n||e.apply(a,o)},f=n&&!i;clearTimeout(i),i=setTimeout(r,t),f&&e.apply(a,o)}},get_cookie:function(e){var t,n,i=document.cookie,a=e+"=";if(i){if(n=i.indexOf("; "+a),-1===n){if(n=i.indexOf(a),0!==n)return null}else n+=2;return t=i.indexOf(";",n),-1===t&&(t=i.length),decodeURIComponent(i.substring(n+a.length,t))}},set_cookie:function(e,t,n,i,a,o){var r=new Date;"object"==typeof n&&n.toGMTString?n=n.toGMTString():parseInt(n,10)?(r.setTime(r.getTime()+1e3*parseInt(n,10)),n=r.toGMTString()):n="",document.cookie=e+"="+encodeURIComponent(t)+(n?"; expires="+n:"")+(i?"; path="+i:"")+(a?"; domain="+a:"")+(o?"; secure":"")},remove_cookie:function(e,t,n,i){PF.helper.set_cookie(e,"",-1e3,t,n,i)},fix:function(obj){for(var property in obj)obj.hasOwnProperty(property)&&(obj[property]=eval("("+obj[property]+")"))}},$.fn.pf_clone=function(){for(var e=$.fn.clone.apply(this,arguments),t=this.find("select").add(this.filter("select")),n=e.find("select").add(e.filter("select")),i=0;i<t.length;++i)for(var a=0;a<t[i].options.length;++a)!0===t[i].options[a].selected&&(n[i].options[a].selected=!0);return this.find(":radio").each(function(){this.orginal_checked=this.checked}),e},$.fn.pf_expand_all=function(){return this.each(function(){$(this).on("click",function(e){e.preventDefault(),$(".pf-wrapper").toggleClass("pf-show-all"),$(".pf-section").pf_reload_script(),$(this).find(".fa").toggleClass("fa-indent").toggleClass("fa-outdent")})})},$.fn.pf_nav_options=function(){var e=$(".pf").data("unique");return $(".pf.pf-"+e+" .pf-nav-options a.nav-tab").on("click",function(){var t=$(this).attr("data-tab-id");PF.helper.set_cookie("pf-last-options-tab-"+e,t)}),this.each(function(){var e=$(this),t=e.find("a"),n=e.closest(".pf").find(".pf-section-id"),i=null;$(window).on("hashchange",function(){var e=window.location.hash.match(new RegExp("tab=([^&]*)")),a=e?e[1]:t.first().attr("href").replace("#tab=",""),o=$("#pf-tab-link-"+(e?a:1));if(o.length>0){o.closest(".pf-tab-depth-0").find("a.nav-tab").addClass("nav-tab-active").siblings().removeClass("nav-tab-active"),t.removeClass("pf-section-active"),t.removeClass("nav-tab-active"),o.addClass("pf-section-active"),o.addClass("nav-tab-active");var r=o.closest(".pf-tab-depth-0");r.children("a.nav-tab").length>0&&(r.children("a.nav-tab").addClass("pf-section-active nav-tab-active"),r.addClass("nav-tab-parent-active").siblings().removeClass("nav-tab-parent-active")),i!==undefined&&$(i).hide();var f=$("#pf-section-"+a);f.css({display:"block"}),f.pf_reload_script(),n.val(a),i=f}}).trigger("hashchange")})},$.fn.pf_nav_metabox=function(){return this.each(function(){var e,t,n=$(this),i=n.find("a"),a=n.data("unique"),o=$("#post_ID").val()||"global";i.on("click",function(n){n.preventDefault();var i=$(this),r=i.data("section");t!==undefined&&t.removeClass("pf-section-active"),e!==undefined&&e.hide(),i.addClass("pf-section-active");var f=$("#pf-section-"+r);f.css({display:"block"}),f.pf_reload_script(),PF.helper.set_cookie("pf-last-metabox-tab-"+o+"-"+a,r),e=f,t=i});var r=PF.helper.get_cookie("pf-last-metabox-tab-"+o+"-"+a);r?n.find('a[data-section="'+r+'"]').trigger("click"):i.first("a").trigger("click")})},$.fn.pf_page_templates=function(){this.length&&$(document).on("change",".editor-page-attributes__template select, #page_template",function(){var e=$(this).val()||"default";$(".pf-page-templates").removeClass("pf-show").addClass("pf-hide"),$(".pf-page-"+e.toLowerCase().replace(/[^a-zA-Z0-9]+/g,"-")).removeClass("pf-hide").addClass("pf-show")})},$.fn.pf_post_formats=function(){this.length&&$(document).on("change",'.editor-post-format select, #formatdiv input[name="post_format"]',function(){var e=$(this).val()||"default";e="0"===e?"default":e,$(".pf-post-formats").removeClass("pf-show").addClass("pf-hide"),$(".pf-post-format-"+e).removeClass("pf-hide").addClass("pf-show")})},$.fn.pf_search=function(){return this.each(function(){var e=$(this),t=e.find("input");t.on("change keyup",function(){var e=$(this).val(),t=$(".pf-wrapper"),n=t.find(".pf-section"),i=n.find("> .pf-field:not(.hidden)"),a=i.find("> .pf-title, .pf-search-tags");e.length>3?(i.addClass("pf-hidden"),t.addClass("pf-search-all"),a.each(function(){var t=$(this);if(t.text().match(new RegExp(".*?"+e+".*?","i"))){var n=t.closest(".pf-field");n.removeClass("pf-hidden"),n.parent().pf_reload_script()}})):(i.removeClass("pf-hidden"),t.removeClass("pf-search-all"))})})},$.fn.pf_sticky=function(){return this.each(function(){var e=$(this),t=$(window),n=e.find(".pf-header-inner"),i=parseInt(n.css("padding-left"))+parseInt(n.css("padding-right")),a=(i=0,32),o=0,r=!1,f=function(){var t=e.offset().top,r=Math.max(a,t-o),f=Math.max(document.documentElement.clientWidth,window.innerWidth||0);r<=a&&f>782?(n.css({width:e.outerWidth()-i}),e.css({height:e.outerHeight()}).addClass("pf-sticky")):(n.removeAttr("style"),e.removeAttr("style").removeClass("pf-sticky"))},s=function(){r||requestAnimationFrame(function(){f(),r=!1}),r=!0},d=function(){o=t.scrollTop(),s()};t.on("scroll resize",d),d()})},$.fn.pf_dependency=function(){return this.each(function(){var e=$(this),t=$.pf_deps.createRuleset(),n=[],i=!1;e.children("[data-controller]").each(function(){var e=$(this),a=e.data("controller").split("|"),o=e.data("condition").split("|"),r=e.data("value").toString().split("|"),f=t;e.data("depend-global")&&(i=!0),$.each(a,function(t,i){var a=r[t]||"",s=o[t]||o[0];f=f.createRule('[data-depend-id="'+i+'"]',s,a),f.include(e),n.push(i)})}),n.length&&(i?$.pf_deps.enable(PF.vars.$body,t,n):$.pf_deps.enable(e,t,n))})},$.fn.pf_field_accordion=function(){return this.each(function(){var e=$(this).find(".pf-accordion-title"),t=$(this).find(".pf-accordion-items");t.find(".pf-accordion-item").each(function(){$(this).hasClass("pf-accordion-item-open")&&$(this).find(".pf-accordion-open").pf_reload_script()}),e.on("click",function(){var e=$(this),n=e.find(".pf-accordion-icon"),i=e.next(),a=e.parent().data("id"),o=e.closest(".pf-accordion-items.pf-accordion-collapsible").length;n.hasClass("fa-angle-right")?n.removeClass("fa-angle-right").addClass("fa-angle-down"):n.removeClass("fa-angle-down").addClass("fa-angle-right"),o?t.find(".pf-accordion-item").each(function(){a!=$(this).data("id")&&($(this).find(".pf-accordion-title").removeClass("pf-accordion-open-title"),$(this).find(".pf-accordion-content").removeClass("pf-accordion-open"))}):i.data("opened")||i.data("opened",!0),e.toggleClass("pf-accordion-open-title"),i.toggleClass("pf-accordion-open"),i.pf_reload_script()})})},$.fn.pf_field_backup=function(){return this.each(function(){if(window.wp.customize!==undefined){var e=this,t=$(this),n=($("body"),t.find(".pf-import")),i=t.find(".pf-reset");e.notification=function(e){wp.customize.notifications&&wp.customize.OverlayNotification&&(wp.customize.state("saved").get()||(wp.customize.state("changesetStatus").set("trash"),wp.customize.each(function(e){e._dirty=!1}),wp.customize.state("saved").set(!0)),wp.customize.notifications.add(new wp.customize.OverlayNotification("pf_field_backup_notification",{type:"info",message:e,loading:!0})))},i.on("click",function(t){t.preventDefault(),PF.vars.is_confirm&&(e.notification(window.PF_vars.i18n.reset_notification),window.wp.ajax.post("pf-reset",{unique:i.data("unique"),nonce:i.data("nonce")}).done(function(e){window.location.reload(!0)}).fail(function(e){alert(e.error),wp.customize.notifications.remove("pf_field_backup_notification")}))}),n.on("click",function(i){i.preventDefault(),PF.vars.is_confirm&&(e.notification(window.pf_vars.i18n.import_notification),window.wp.ajax.post("pf-import",{unique:n.data("unique"),nonce:n.data("nonce"),import_data:t.find(".pf-import-data").val(),where:t.find(".pf-backup-where").val(),post_id:t.find(".pf-backup-post_id").val()}).done(function(e){window.location.reload(!0)}).fail(function(e){alert(e.error),wp.customize.notifications.remove("pf_field_backup_notification")}))})}})},$.fn.pf_field_background=function(){return this.each(function(){$(this).find(".pf--media").pf_reload_script()})},$.fn.pf_field_code_editor=function(){return this.each(function(){if("function"==typeof CodeMirror){var e=$(this),t=e.find("textarea"),n=e.find(".CodeMirror"),i=t.data("editor");n.length&&n.remove();var a=setInterval(function(){if(e.is(":visible")){var n=CodeMirror.fromTextArea(t[0],i);if("default"!==i.theme&&-1===PF.vars.code_themes.indexOf(i.theme)){var o=$("<link>");$("#pf-codemirror-css").after(o),o.attr({rel:"stylesheet",id:"pf-codemirror-"+i.theme+"-css",href:i.cdnURL+"/theme/"+i.theme+".min.css",type:"text/css",media:"all"}),PF.vars.code_themes.push(i.theme)}CodeMirror.modeURL=i.cdnURL+"/mode/%N/%N.min.js",CodeMirror.autoLoadMode(n,i.mode),n.on("change",function(e,i){t.val(n.getValue()).trigger("change")}),clearInterval(a)}})}})},$.fn.pf_field_date=function(){return this.each(function(){var e=$(this),t=e.find("input"),n=e.find(".pf-date-settings").data("settings"),i={showAnim:"",beforeShow:function(e,t){$(t.dpDiv).addClass("pf-datepicker-wrapper")},onClose:function(e,t){$(t.dpDiv).removeClass("pf-datepicker-wrapper")}};n=$.extend({},n,i),2===t.length&&(n=$.extend({},n,{onSelect:function(e){$(this),t.first();var i=t.first().attr("id")===$(this).attr("id")?"minDate":"maxDate",a=$.datepicker.parseDate(n.dateFormat,e);t.not(this).datepicker("option",i,a)}})),t.each(function(){var e=$(this);e.hasClass("hasDatepicker")&&e.removeAttr("id").removeClass("hasDatepicker"),e.datepicker(n)})})},$.fn.pf_field_fieldset=function(){return this.each(function(){$(this).find(".pf-fieldset-content").pf_reload_script()})},$.fn.pf_field_gallery=function(){return this.each(function(){var e,t=$(this),n=t.find(".pf-edit-gallery"),i=t.find(".pf-clear-gallery"),a=t.find("ul"),o=t.find("input");t.find("img");t.on("click",".pf-button, .pf-edit-gallery",function(t){var r=$(this),f=o.val(),s=r.hasClass("pf-edit-gallery")?"edit":"add",d="add"!==s||f.length?"gallery-edit":"gallery";t.preventDefault(),void 0!==window.wp&&window.wp.media&&window.wp.media.gallery&&("gallery"===d?(e=window.wp.media({library:{type:"image"},frame:"post",state:"gallery",multiple:!0}),e.open()):(e=window.wp.media.gallery.edit('[gallery ids="'+f+'"]'),"add"===s&&e.setState("gallery-library")),e.on("update",function(e){a.empty();var t=e.models.map(function(e){var t=e.toJSON(),n=t.sizes&&t.sizes.thumbnail&&t.sizes.thumbnail.url?t.sizes.thumbnail.url:t.url;return a.append('<li><img src="'+n+'"></li>'),t.id});o.val(t.join(",")).trigger("change"),i.removeClass("hidden"),n.removeClass("hidden")}))}),i.on("click",function(e){e.preventDefault(),a.empty(),o.val("").trigger("change"),i.addClass("hidden"),n.addClass("hidden")})})},$.fn.pf_field_group=function(){return this.each(function(){var e=$(this),t=e.children(".pf-fieldset"),n=t.length?t:e,i=n.children(".pf-cloneable-wrapper"),a=n.children(".pf-cloneable-hidden"),o=n.children(".pf-cloneable-max"),r=n.children(".pf-cloneable-min"),f=i.data("field-id"),s=i.data("unique-id"),d=Boolean(Number(i.data("title-number"))),l=parseInt(i.data("max")),c=parseInt(i.data("min"));i.hasClass("ui-accordion")&&i.find(".ui-accordion-header-icon").remove();var p=function(e){e.find(".pf-cloneable-title-number").each(function(e){$(this).html($(this).closest(".pf-cloneable-item").index()+1+".")})};i.accordion({header:"> .pf-cloneable-item > .pf-cloneable-title",collapsible:!0,active:!1,animate:!1,heightStyle:"content",icons:{header:"pf-cloneable-header-icon fa fa-angle-right",activeHeader:"pf-cloneable-header-icon fa fa-angle-down"},activate:function(e,t){var n=t.newPanel,i=t.newHeader;if(n.length&&!n.data("opened")){var a=n.children(),o=a.first().find(":input").first(),r=i.find(".pf-cloneable-value");o.on("keyup",function(e){r.text(o.val())}),n.pf_reload_script(),n.data("opened",!0),n.data("retry",!1)}else n.data("retry")&&(n.pf_reload_script_retry(),n.data("retry",!1))}}),i.sortable({axis:"y",handle:".pf-cloneable-title,.pf-cloneable-sort",helper:"original",cursor:"move",placeholder:"widget-placeholder",start:function(e,t){i.accordion({active:!1}),i.sortable("refreshPositions"),t.item.children(".pf-cloneable-content").data("retry",!0)},update:function(e,t){PF.helper.name_nested_replace(i.children(".pf-cloneable-item"),f),i.pf_customizer_refresh(),d&&p(i)}}),n.children(".pf-cloneable-add").on("click",function(e){e.preventDefault();var t=i.children(".pf-cloneable-item").length;if(r.hide(),l&&t+1>l)o.show();else{var n=s+f+"["+t+"]",c=a.pf_clone(!0);c.removeClass("pf-cloneable-hidden"),c.find(':input[name!="_pseudo"]').each(function(){this.name=n+this.name.replace(this.name.startsWith("_nonce")?"_nonce":s,"")}),c.find(".pf-data-wrapper").each(function(){$(this).attr("data-unique-id",n)}),i.append(c),i.accordion("refresh"),i.accordion({active:t}),i.pf_customizer_refresh(),i.pf_customizer_listen({closest:!0}),d&&p(i)}});var h=function(e){e.preventDefault();var t=i.children(".pf-cloneable-item").length;if(r.hide(),l&&t+1>l)o.show();else{var n=$(this),a=n.parent().parent(),s=a.children(".pf-cloneable-helper").pf_clone(!0),c=a.children(".pf-cloneable-title").pf_clone(),h=a.children(".pf-cloneable-content").pf_clone(),u=new RegExp("("+PF.helper.preg_quote(f)+")\\[(\\d+)\\]","g");h.find(".pf-data-wrapper").each(function(){var e=$(this);e.attr("data-unique-id",e.attr("data-unique-id").replace(u,f+"["+(a.index()+1)+"]"))});var v=$('<div class="pf-cloneable-item" />');v.append(s),v.append(c),v.append(h),i.children().eq(a.index()).after(v),PF.helper.name_nested_replace(i.children(".pf-cloneable-item"),f),i.accordion("refresh"),i.pf_customizer_refresh(),i.pf_customizer_listen({closest:!0}),d&&p(i)}};i.children(".pf-cloneable-item").children(".pf-cloneable-helper").on("click",".pf-cloneable-clone",h),n.children(".pf-cloneable-hidden").children(".pf-cloneable-helper").on("click",".pf-cloneable-clone",h);var u=function(e){e.preventDefault();var t=i.children(".pf-cloneable-item").length;o.hide(),r.hide(),c&&t-1<c?r.show():($(this).closest(".pf-cloneable-item").remove(),PF.helper.name_nested_replace(i.children(".pf-cloneable-item"),f),i.pf_customizer_refresh(),d&&p(i))};i.children(".pf-cloneable-item").children(".pf-cloneable-helper").on("click",".pf-cloneable-remove",u),n.children(".pf-cloneable-hidden").children(".pf-cloneable-helper").on("click",".pf-cloneable-remove",u)})},$.fn.pf_field_icon=function(){return this.each(function(){var e=$(this);e.on("click",".pf-icon-add",function(t){t.preventDefault();var n=$(this),i=$("#pf-modal-icon");i.show(),PF.vars.$icon_target=e,PF.vars.icon_modal_loaded||(i.find(".pf-modal-loading").show(),window.wp.ajax.post("pf-get-icons",{nonce:n.data("nonce")}).done(function(e){i.find(".pf-modal-loading").hide(),PF.vars.icon_modal_loaded=!0;var t=i.find(".pf-modal-load").html(e.content);t.on("click","a",function(e){e.preventDefault();var t=$(this).data("pf-icon");PF.vars.$icon_target.find("i").removeAttr("class").addClass(t),PF.vars.$icon_target.find("input").val(t).trigger("change"),PF.vars.$icon_target.find(".pf-icon-preview").removeClass("hidden"),PF.vars.$icon_target.find(".pf-icon-remove").removeClass("hidden"),i.hide()}),i.on("change keyup",".pf-icon-search",function(){var e=$(this).val(),n=t.find("a");n.each(function(){var t=$(this);t.data("pf-icon").search(new RegExp(e,"i"))<0?t.hide():t.show()})}),i.on("click",".pf-modal-close, .pf-modal-overlay",function(){i.hide()})}).fail(function(e){i.find(".pf-modal-loading").hide(),i.find(".pf-modal-load").html(e.error),i.on("click",function(){i.hide()})}))}),e.on("click",".pf-icon-remove",function(t){t.preventDefault(),e.find(".pf-icon-preview").addClass("hidden"),e.find("input").val("").trigger("change"),$(this).addClass("hidden")})})},$.fn.pf_field_media=function(){return this.each(function(){var e,t=$(this),n=t.find(".pf--button"),i=t.find(".pf--remove"),a=n.data("library")&&n.data("library").split(",")||"";n.on("click",function(o){o.preventDefault(),void 0!==window.wp&&window.wp.media&&window.wp.media.gallery&&(e?e.open():(e=window.wp.media({library:{type:a}}),e.on("select",function(){var o,r=e.state().get("selection").first().attributes,f=n.data("preview-size")||"thumbnail";a.length&&-1===a.indexOf(r.subtype)&&-1===a.indexOf(r.type)||(t.find(".pf--id").val(r.id),t.find(".pf--width").val(r.width),t.find(".pf--height").val(r.height),t.find(".pf--alt").val(r.alt),t.find(".pf--title").val(r.title),t.find(".pf--description").val(r.description),o=void 0!==r.sizes&&void 0!==r.sizes.thumbnail&&"thumbnail"===f?r.sizes.thumbnail.url:void 0!==r.sizes&&void 0!==r.sizes.full?r.sizes.full.url:r.icon,i.removeClass("hidden"),t.find(".pf--preview").removeClass("hidden"),t.find(".pf--src").attr("src",o),t.find(".pf--thumbnail").val(o),t.find(".pf--url").val(r.url).trigger("change"))}),e.open()))}),i.on("click",function(e){e.preventDefault(),i.addClass("hidden"),t.find("input").val(""),t.find(".pf--preview").addClass("hidden"),t.find(".pf--thumbnail"),t.find(".pf--url").trigger("change")})})},$.fn.pf_field_repeater=function(){return this.each(function(){var e=$(this),t=e.children(".pf-fieldset"),n=t.length?t:e,i=n.children(".pf-repeater-wrapper"),a=n.children(".pf-repeater-hidden"),o=n.children(".pf-repeater-max"),r=n.children(".pf-repeater-min"),f=i.data("field-id"),s=i.data("unique-id"),d=parseInt(i.data("max")),l=parseInt(i.data("min"));i.children(".pf-repeater-item").children(".pf-repeater-content").pf_reload_script(),i.sortable({axis:"y",handle:".pf-repeater-sort",helper:"original",cursor:"move",placeholder:"widget-placeholder",update:function(e,t){PF.helper.name_nested_replace(i.children(".pf-repeater-item"),f),i.pf_customizer_refresh(),t.item.pf_reload_script_retry()}}),t.children(".pf-repeater-add").on("click",function(e){e.preventDefault();var t=i.children(".pf-repeater-item").length;if(r.hide(),d&&t+1>d)o.show();else{var n=s+f+"["+t+"]",l=a.pf_clone(!0);l.removeClass("pf-repeater-hidden"),l.find(':input[name!="_pseudo"]').each(function(){this.name=n+this.name.replace(this.name.startsWith("_nonce")?"_nonce":s,"")}),l.find(".pf-data-wrapper").each(function(){$(this).attr("data-unique-id",n)}),i.append(l),l.children(".pf-repeater-content").pf_reload_script(),i.pf_customizer_refresh(),i.pf_customizer_listen({closest:!0})}});var c=function(e){e.preventDefault();var t=i.children(".pf-repeater-item").length;if(r.hide(),d&&t+1>d)o.show();else{var n=$(this),a=n.parent().parent().parent(),s=a.children(".pf-repeater-content").pf_clone(),l=a.children(".pf-repeater-helper").pf_clone(!0),c=new RegExp("("+PF.helper.preg_quote(f)+")\\[(\\d+)\\]","g");s.find(".pf-data-wrapper").each(function(){var e=$(this);e.attr("data-unique-id",e.attr("data-unique-id").replace(c,f+"["+(a.index()+1)+"]"))});var p=$('<div class="pf-repeater-item" />');p.append(s),p.append(l),i.children().eq(a.index()).after(p),p.children(".pf-repeater-content").pf_reload_script(),PF.helper.name_nested_replace(i.children(".pf-repeater-item"),f),i.pf_customizer_refresh(),i.pf_customizer_listen({closest:!0})}};i.children(".pf-repeater-item").children(".pf-repeater-helper").on("click",".pf-repeater-clone",c),n.children(".pf-repeater-hidden").children(".pf-repeater-helper").on("click",".pf-repeater-clone",c);var p=function(e){e.preventDefault();var t=i.children(".pf-repeater-item").length;o.hide(),r.hide(),l&&t-1<l?r.show():($(this).closest(".pf-repeater-item").remove(),PF.helper.name_nested_replace(i.children(".pf-repeater-item"),f),i.pf_customizer_refresh())};i.children(".pf-repeater-item").children(".pf-repeater-helper").on("click",".pf-repeater-remove",p),t.children(".pf-repeater-hidden").children(".pf-repeater-helper").on("click",".pf-repeater-remove",p)})},$.fn.pf_field_slider=function(){return this.each(function(){var e=$(this),t=e.find("input"),n=e.find(".pf-slider-ui"),i=t.data(),a=t.val()||0;n.hasClass("ui-slider")&&n.empty(),n.slider({range:"min",value:a,min:i.min,max:i.max,step:i.step,slide:function(e,n){t.val(n.value).trigger("change")}}),t.keyup(function(){n.slider("value",t.val())})})},$.fn.pf_field_sortable=function(){return this.each(function(){var e=$(this).find(".pf--sortable");e.sortable({axis:"y",helper:"original",cursor:"move",placeholder:"widget-placeholder",update:function(t,n){e.pf_customizer_refresh()}}),e.find(".pf--sortable-content").pf_reload_script()})},$.fn.pf_field_sorter=function(){return this.each(function(){var e=$(this),t=e.find(".pf-enabled"),n=e.find(".pf-disabled"),i=!!n.length&&n;t.sortable({connectWith:i,placeholder:"ui-sortable-placeholder",update:function(t,n){var i=n.item.find("input");n.item.parent().hasClass("pf-enabled")?i.attr("name",i.attr("name").replace("disabled","enabled")):i.attr("name",i.attr("name").replace("enabled","disabled")),e.pf_customizer_refresh()}}),i&&i.sortable({connectWith:t,placeholder:"ui-sortable-placeholder",update:function(t,n){e.pf_customizer_refresh()}})})},$.fn.pf_field_spinner=function(){return this.each(function(){var e=$(this),t=e.find("input"),n=e.find(".ui-spinner-button"),i=t.data("unit");n.length&&n.remove(),t.spinner({max:t.data("max")||100,min:t.data("min")||0,step:t.data("step")||1,create:function(t,n){i.length&&e.find(".ui-spinner-up").after('<span class="ui-button-text-only pf--unit">'+i+"</span>")},spin:function(e,n){t.val(n.value).trigger("change")}})})},$.fn.pf_field_switcher=function(){return this.each(function(){if(!$(this).hasClass("pf-field-switcher-disabled")){var e=$(this).find(".pf--switcher");e.unbind("click").on("click",function(){if(!$(this).hasClass("pf-field-switcher-disabled")){var t=0,n=e.find("input");e.hasClass("pf--active")?e.removeClass("pf--active"):(t=1,e.addClass("pf--active")),n.val(t).trigger("change")}}),e.pf_reload_script()}})},$.fn.pf_field_tab=function(){return this.each(function(){var e=$(this),t=e.find(".pf-tab-nav a"),n=e.find(".pf-tab-section");n.eq(0).pf_reload_script(),t.on("click",function(e){e.preventDefault();var t=$(this),i=t.index(),a=n.eq(i);t.addClass("pf-tab-active").siblings().removeClass("pf-tab-active"),a.pf_reload_script(),a.removeClass("hidden").siblings().addClass("hidden")})})},$.fn.pf_field_typography=function(){return this.each(function(){var e=this,t=$(this),n=[],i=pf_typography_json.webfonts,a=pf_typography_json.googlestyles,o=pf_typography_json.defaultstyles;e.sanitize_subset=function(e){return e=e.replace("-ext"," Extended"),e=e.charAt(0).toUpperCase()+e.slice(1),e},e.sanitize_style=function(e){return a[e]?a[e]:e},e.load_google_font=function(e,t,i){e&&"object"==typeof WebFont&&(t=t?t.replace("normal",""):"",i=i?i.replace("normal",""):"",(t||i)&&(e=e+":"+t+i),-1===n.indexOf(e)&&WebFont.load({google:{families:[e]}}),n.push(e))},e.append_select_options=function(t,n,i,a,o){t.find("option").not(":first").remove();var r="";$.each(n,function(t,n){var f,s=n;f=o?i&&-1!==i.indexOf(n)?" selected":"":i&&i===n?" selected":"","subset"===a?s=e.sanitize_subset(n):"style"===a&&(s=e.sanitize_style(n)),r+='<option value="'+n+'"'+f+">"+s+"</option>"}),t.append(r).trigger("pf.change").trigger("chosen:updated")},e.init=function(){var n=[],a=t.find(".pf--typography"),r=t.find(".pf--type"),f=t.find(".pf--block-font-style"),s=a.data("unit"),d=a.data("exclude")?a.data("exclude").split(","):[];if(t.find(".pf--chosen").length){var l=t.find("select");l.each(function(){var e=$(this),t=e.parent().find(".chosen-container");t.length&&t.remove(),e.chosen({allow_single_deselect:!0,disable_search_threshold:15,width:"100%"})})}var c=t.find(".pf--font-family"),p=c.val();c.find("option").not(":first-child").remove();var h="";$.each(i,function(e,t){d&&-1!==d.indexOf(e)||(h+='<optgroup label="'+t.label+'">',$.each(t.fonts,function(t,n){n="object"==typeof n?t:n;var i=n===p?" selected":"";h+='<option value="'+n+'" data-type="'+e+'"'+i+">"+n+"</option>"}),h+="</optgroup>")}),c.append(h).trigger("chosen:updated");var u=t.find(".pf--block-font-style");if(u.length){var v=t.find(".pf--font-style-select"),m=v.val()?v.val().replace(/normal/g,""):"";v.on("change pf.change",function(e){var i=v.val();!i&&n&&-1===n.indexOf("normal")&&(i=n[0]);var a=i&&"italic"!==i&&"normal"===i?"normal":"",o=i&&"italic"!==i&&"normal"!==i?i.replace("italic",""):a,r=i&&"italic"===i.substr(-6)?"italic":"";t.find(".pf--font-weight").val(o),t.find(".pf--font-style").val(r)});var g=t.find(".pf--block-extra-styles");if(g.length)var _=t.find(".pf--extra-styles"),b=_.val()}var w=t.find(".pf--block-subset");if(w.length)var y=t.find(".pf--subset"),x=y.val(),C=y.data("multiple")||!1;var k=t.find(".pf--block-backup-font-family");c.on("change pf.change",function(t){w.length&&w.addClass("hidden"),g.length&&g.addClass("hidden"),k.length&&k.addClass("hidden");var a=c.find(":selected"),s=a.val(),d=a.data("type");if(d&&s){if("google"!==d&&"custom"!==d||!k.length||k.removeClass("hidden"),u.length){var l=o;"google"===d&&i[d].fonts[s][0]?l=i[d].fonts[s][0]:"custom"===d&&i[d].fonts[s]&&(l=i[d].fonts[s]),n=l;var p=-1!==l.indexOf("normal")?"normal":l[0],h=m&&-1!==l.indexOf(m)?m:p;e.append_select_options(v,l,h,"style"),m=!1,u.removeClass("hidden"),"google"===d&&g.length&&l.length>1&&(e.append_select_options(_,l,b,"style",!0),b=!1,g.removeClass("hidden"))}if("google"===d&&w.length&&i[d].fonts[s][1]){var $=i[d].fonts[s][1],z=$.length<2&&"latin"!==$[0]?$[0]:"",P=x&&-1!==$.indexOf(x)?x:z;P=C&&x?x:P,e.append_select_options(y,$,P,"subset",C),x=!1,w.removeClass("hidden")}}else f.find(":input").val(""),w.length&&(y.find("option").not(":first-child").remove(),y.trigger("chosen:updated")),u.length&&(v.find("option").not(":first-child").remove(),v.trigger("chosen:updated"));r.val(d)}).trigger("pf.change");var z=t.find(".pf--block-preview");if(z.length){var P=t.find(".pf--preview");t.on("change",PF.helper.debounce(function(n){z.removeClass("hidden");var i=c.val(),a=t.find(".pf--font-weight").val(),o=t.find(".pf--font-style").val(),r=t.find(".pf--font-size").val(),f=t.find(".pf--font-variant").val(),d=t.find(".pf--line-height").val(),l=t.find(".pf--text-align").val(),p=t.find(".pf--text-transform").val(),h=t.find(".pf--text-decoration").val(),u=t.find(".pf--color").val(),v=t.find(".pf--word-spacing").val(),m=t.find(".pf--letter-spacing").val(),g=t.find(".pf--custom-style").val(),_=t.find(".pf--type").val();"google"===_&&e.load_google_font(i,a,o);var b={};i&&(b.fontFamily=i),a&&(b.fontWeight=a),o&&(b.fontStyle=o),f&&(b.fontVariant=f),r&&(b.fontSize=r+s),d&&(b.lineHeight=d+s),m&&(b.letterSpacing=m+s),v&&(b.wordSpacing=v+s),l&&(b.textAlign=l),p&&(b.textTransform=p),h&&(b.textDecoration=h),u&&(b.color=u),P.removeAttr("style"),g&&P.attr("style",g),P.css(b)},100)),z.on("click",function(){P.toggleClass("pf--black-background");var e=z.find(".pf--toggle");e.hasClass("fa-toggle-off")?e.removeClass("fa-toggle-off").addClass("fa-toggle-on"):e.removeClass("fa-toggle-on").addClass("fa-toggle-off")}),z.hasClass("hidden")||t.trigger("change")}},e.init()})},$.fn.pf_field_upload=function(){return this.each(function(){var e,t=$(this),n=t.find("input"),i=t.find(".pf--button"),a=t.find(".pf--remove"),o=i.data("library")&&i.data("library").split(",")||"";n.on("change",function(e){n.val()?a.removeClass("hidden"):a.addClass("hidden")}),i.on("click",function(t){t.preventDefault(),void 0!==window.wp&&window.wp.media&&window.wp.media.gallery&&(e?e.open():(e=window.wp.media({library:{type:o}}),e.on("select",function(){var t=e.state().get("selection").first().attributes;o.length&&-1===o.indexOf(t.subtype)&&-1===o.indexOf(t.type)||n.val(t.url).trigger("change")}),e.open()))}),a.on("click",function(e){e.preventDefault(),n.val("").trigger("change")})})},$.fn.pf_field_wp_editor=function(){return this.each(function(){if(void 0!==window.wp.editor&&void 0!==window.tinyMCEPreInit&&void 0!==window.tinyMCEPreInit.mceInit.pf_wp_editor){var e=$(this),t=e.find(".pf-wp-editor"),n=e.find("textarea"),i=e.find(".wp-editor-wrap").length||e.find(".mce-container").length;i&&(t.empty(),t.append(n),n.css("display",""));var a=PF.helper.uid("pf-editor-");n.attr("id",a);var o={tinymce:window.tinyMCEPreInit.mceInit.pf_wp_editor,quicktags:window.tinyMCEPreInit.qtInit.pf_wp_editor},r=t.data("editor-settings"),f=function(e){e.on("change",PF.helper.debounce(function(){e.save(),n.trigger("change")},250))},s=wp.oldEditor?wp.oldEditor:wp.editor;s&&s.hasOwnProperty("autop")&&(wp.editor.autop=s.autop,wp.editor.removep=s.removep,wp.editor.initialize=s.initialize),o.tinymce=$.extend({},o.tinymce,{selector:"#"+a,setup:f}),!1===r.tinymce&&(o.tinymce=!1,t.addClass("pf-no-tinymce")),!1===r.quicktags&&(o.quicktags=!1,t.addClass("pf-no-quicktags"));var d=setInterval(function(){e.is(":visible")&&(window.wp.editor.initialize(a,o),clearInterval(d))});if(r.media_buttons&&window.pf_media_buttons){var l=t.find(".wp-media-buttons");if(l.length)l.find(".pf-shortcode-button").data("editor-id",a);else{var c=$(window.pf_media_buttons);c.find(".pf-shortcode-button").data("editor-id",a),t.prepend(c)}}}})},$.fn.pf_confirm=function(){return this.each(function(){$(this).on("click",function(e){var t=$(this).data("confirm")||window.pf_vars.i18n.confirm,n=confirm(t);if(PF.vars.is_confirm=!0,!n)return e.preventDefault(),PF.vars.is_confirm=!1,!1})})},$.fn.serializeObject=function(){var e={};return $.each(this.serializeArray(),function(t,n){var i=n.name,a=n.value;e[i]=e[i]===undefined?a:$.isArray(e[i])?e[i].concat(a):[e[i],a]}),e},$.fn.pf_save=function(){return this.each(function(){var e,t=$(this),n=$(".pf-save"),i=$(".pf-options"),a=!1;t.on("click",function(o){if(!a){var r=t.data("save"),f=t.val();n.attr("value",r),t.hasClass("pf-save-ajax")&&(o.preventDefault(),i.addClass("pf-saving"),n.prop("disabled",!0),window.wp.ajax.post("pf_"+i.data("unique")+"_ajax_save",{data:$("#pf-form").serializeJSONPF()}).done(function(t){clearTimeout(e);var o=$(".pf-form-success");o.empty().append(t.notice).slideDown("fast",function(){e=setTimeout(function(){o.slideUp("fast")},2e3)}),$(".pf-error").remove();var r=$(".pf-form-error");if(r.empty().hide(),Object.keys(t.errors).length){var s='<i class="pf-label-error pf-error">!</i>';$.each(t.errors,function(e,t){var n=$('[data-depend-id="'+e+'"]'),i=$("#pf-tab-link-"+(n.closest(".pf-section").index()+1)),a=i.closest(".pf-tab-depth-0");n.closest(".pf-fieldset").append('<p class="pf-text-error pf-error">'+t+"</p>"),i.find(".pf-error").length||i.append(s),a.find(".pf-arrow .pf-error").length||a.find(".pf-arrow").append(s),console.log(t),r.append("<div>"+s+" "+t+"</div>")}),r.show()}i.removeClass("pf-saving"),n.prop("disabled",!1).attr("value",f),a=!1}).fail(function(e){alert(e.error)}))}a=!0})})},$.fn.pf_shortcode=function(){var e=this;return e.shortcode_parse=function(t,n){var i="";return $.each(t,function(t,a){n=n||t,i+="["+n,$.each(a,function(t,a){"content"===t?(i+="]",i+=a,i+="[/"+n):i+=e.shortcode_tags(t,a)}),i+="]"}),i},e.shortcode_tags=function(e,t){var n="";return""!==t&&("object"!=typeof t||$.isArray(t)?n+=" "+e.replace("-","_")+'="'+t.toString()+'"':$.each(t,function(e,t){switch(e){case"background-image":t=t.url?t.url:""}""!==t&&(n+=" "+e.replace("-","_")+'="'+t.toString()+'"')})),n},e.insertAtChars=function(e,t){var n=void 0!==e[0].name?e[0]:e;return n.value.length&&void 0!==n.selectionStart?(n.focus(),n.value.substring(0,n.selectionStart)+t+n.value.substring(n.selectionEnd,n.value.length)):(n.focus(),t)},e.send_to_editor=function(t,n){var i;if("undefined"!=typeof tinymce&&(i=tinymce.get(n)),
i&&!i.isHidden())i.execCommand("mceInsertContent",!1,t);else{var a=$("#"+n);a.val(e.insertAtChars(a,t)).trigger("change")}},this.each(function(){var t,n,i,a,o,r,f,s,d,l=$(this),c=l.find(".pf-modal-load"),p=(l.find(".pf-modal-content"),l.find(".pf-modal-insert")),h=l.find(".pf-modal-loading"),u=l.find("select"),v=l.data("modal-id"),m=l.data("nonce");$(document).on("click",'.pf-shortcode-button[data-modal-id="'+v+'"]',function(e){e.preventDefault(),d=$(this),t=d.data("editor-id")||!1,n=d.data("target-id")||!1,i=d.data("gutenberg-id")||!1,l.show(),l.hasClass("pf-shortcode-single")&&o===undefined&&u.trigger("change")}),u.on("change",function(){var e=$(this),t=e.find(":selected");a=e.val(),o=t.data("shortcode"),r=t.data("view")||"normal",f=t.data("group")||o,c.empty(),a?(h.show(),window.wp.ajax.post("pf-get-shortcode-"+v,{shortcode_key:a,nonce:m}).done(function(e){h.hide();var t=$(e.content).appendTo(c);p.parent().removeClass("hidden"),s=t.find(".pf--repeat-shortcode").pf_clone(),t.pf_reload_script(),t.find(".pf-fields").pf_reload_script()})):p.parent().addClass("hidden")}),p.on("click",function(a){a.preventDefault();var s="",c=l.find(".pf-field:not(.hidden)").find(":input:not(.ignore)").serializeObjectPF();switch(r){case"contents":var p=o?c[o]:c;$.each(p,function(e,t){var n=o||e;s+="["+n+"]"+t+"[/"+n+"]"});break;case"group":s+="["+o,$.each(c[o],function(t,n){s+=e.shortcode_tags(t,n)}),s+="]",s+=e.shortcode_parse(c[f],f),s+="[/"+o+"]";break;case"repeater":s+=e.shortcode_parse(c[f],f);break;default:s+=e.shortcode_parse(c)}if(s=""===s?"["+o+"]":s,i){var h=window.pf_gutenberg_props.attributes.hasOwnProperty("shortcode")?window.pf_gutenberg_props.attributes.shortcode:"";window.pf_gutenberg_props.setAttributes({shortcode:h+s})}else if(t)e.send_to_editor(s,t);else{var u=n?$(n):d.parent().find("textarea");u.val(e.insertAtChars(u,s)).trigger("change")}l.hide()}),l.on("click",".pf--repeat-button",function(e){e.preventDefault();var t=l.find(".pf--repeatable"),n=s.pf_clone(),i=n.find(".pf-repeat-remove");n.appendTo(t);n.find(".pf-fields").pf_reload_script(),PF.helper.name_nested_replace(l.find(".pf--repeat-shortcode"),f),i.on("click",function(){n.remove(),PF.helper.name_nested_replace(l.find(".pf--repeat-shortcode"),f)})}),l.on("click",".pf-modal-close, .pf-modal-overlay",function(){l.hide()})})},"function"==typeof Color&&(Color.fn.toString=function(){if(this._alpha<1)return this.toCSS("rgba",this._alpha).replace(/\s+/g,"");var e=parseInt(this._color,10).toString(16);if(this.error)return"";if(e.length<6)for(var t=6-e.length-1;t>=0;t--)e="0"+e;return"#"+e}),PF.funcs.parse_color=function(e){var t=e.replace(/\s+/g,""),n=-1!==t.indexOf("rgba")?parseFloat(100*t.replace(/^.*,(.+)\)/,"$1")):100,i=n<100;return{value:t,transparent:n,rgba:i}},$.fn.pf_color=function(){return this.each(function(){var e,t=$(this),n=PF.funcs.parse_color(t.val()),i=!window.pf_vars.color_palette.length||window.pf_vars.color_palette;t.hasClass("wp-color-picker")&&t.closest(".wp-picker-container").after(t).remove(),t.wpColorPicker({palettes:i,change:function(n,i){var a=i.color.toString();e.removeClass("pf--transparent-active"),e.find(".pf--transparent-offset").css("background-color",a),t.val(a).trigger("change")},create:function(){e=t.closest(".wp-picker-container");var i=t.data("a8cIris"),a=$('<div class="pf--transparent-wrap"><div class="pf--transparent-slider"></div><div class="pf--transparent-offset"></div><div class="pf--transparent-text"></div><div class="pf--transparent-button">transparent <i class="fa fa-toggle-off"></i></div></div>').appendTo(e.find(".wp-picker-holder")),o=a.find(".pf--transparent-slider"),r=a.find(".pf--transparent-text"),f=a.find(".pf--transparent-offset"),s=a.find(".pf--transparent-button");"transparent"===t.val()&&e.addClass("pf--transparent-active"),s.on("click",function(){"transparent"!==t.val()?(t.val("transparent").trigger("change").removeClass("iris-error"),e.addClass("pf--transparent-active")):(t.val(i._color.toString()).trigger("change"),e.removeClass("pf--transparent-active"))}),o.slider({value:n.transparent,step:1,min:0,max:100,slide:function(e,n){var a=parseFloat(n.value/100);i._color._alpha=a,t.wpColorPicker("color",i._color.toString()),r.text(1===a||0===a?"":a)},create:function(){var a=parseFloat(n.transparent/100),s=a<1?a:"";r.text(s),f.css("background-color",n.value),e.on("click",".wp-picker-clear",function(){i._color._alpha=1,r.text(""),o.slider("option","value",100),e.removeClass("pf--transparent-active"),t.trigger("change")}),e.on("click",".wp-picker-default",function(){var e=PF.funcs.parse_color(t.data("default-color")),n=parseFloat(e.transparent/100),a=n<1?n:"";i._color._alpha=n,r.text(a),o.slider("option","value",e.transparent)})}})}})})},$.fn.pf_chosen=function(){return this.each(function(){var e=$(this),t=e.parent().find(".chosen-container"),n=e.hasClass("pf-chosen-sortable")||!1,i=e.hasClass("pf-chosen-ajax")||!1,a=e.attr("multiple")||!1,o=a?"100%":"auto",r=$.extend({allow_single_deselect:!0,disable_search_threshold:10,width:o,no_results_text:window.pf_vars.i18n.no_results_text},e.data("chosen-settings"));if(t.length&&t.remove(),i){var f=$.extend({data:{type:"post",nonce:""},allow_single_deselect:!0,disable_search_threshold:-1,width:"100%",min_length:3,type_delay:500,typing_text:window.pf_vars.i18n.typing_text,searching_text:window.pf_vars.i18n.searching_text,no_results_text:window.pf_vars.i18n.no_results_text},e.data("chosen-settings"));e.PFAjaxChosen(f)}else e.chosen(r);if(a){var s=e.parent().find(".pf-hidden-select"),d=s.val()||[];e.on("change",function(e,t){t&&t.selected?s.append('<option value="'+t.selected+'" selected="selected">'+t.selected+"</option>"):t&&t.deselected&&s.find('option[value="'+t.deselected+'"]').remove(),0===s.children().length&&window.wp.customize!==undefined&&window.wp.customize.control(s.data("customize-setting-link")).setting.set(""),s.trigger("change")}),e.PFChosenOrder(d,!0)}if(n){var l=e.parent().find(".chosen-container"),c=l.find(".chosen-choices");c.bind("mousedown",function(e){$(e.target).is("span")&&e.stopPropagation()}),c.sortable({items:"li:not(.search-field)",helper:"orginal",cursor:"move",placeholder:"search-choice-placeholder",start:function(e,t){t.placeholder.width(t.item.innerWidth()),t.placeholder.height(t.item.innerHeight())},update:function(t,n){var i="",a=e.data("chosen"),o=e.parent().find(".pf-hidden-select");c.find(".search-choice-close").each(function(){var e=$(this).data("option-array-index");$.each(a.results_data,function(t,n){n.array_index===e&&(i+='<option value="'+n.value+'" selected>'+n.value+"</option>")})}),o.children().remove(),o.append(i),o.trigger("change")}})}})},$.fn.pf_checkbox=function(){return this.each(function(){var e=$(this),t=e.find(".pf--input"),n=e.find(".pf--checkbox");n.on("click",function(){t.val(Number(n.prop("checked"))).trigger("change")})})},$.fn.pf_siblings=function(){return this.each(function(){var e=$(this),t=e.find(".pf--sibling"),n=e.data("multiple")||!1;t.on("click",function(){var t=$(this);n?t.hasClass("pf--active")?(t.removeClass("pf--active"),t.find("input").prop("checked",!1).trigger("change")):(t.addClass("pf--active"),t.find("input").prop("checked",!0).trigger("change")):(e.find("input").prop("checked",!1),t.find("input").prop("checked",!0).trigger("change"),t.addClass("pf--active").siblings().removeClass("pf--active"))})})},$.fn.pf_help=function(){return this.each(function(){var e,t,n=$(this);n.on({mouseenter:function(){e=$('<div class="pf-tooltip"></div>').html(n.attr("data-tooltip")).appendTo("body"),t=PF.vars.is_rtl?n.offset().left+24:n.offset().left+n.outerWidth()/2-e.outerWidth()/2,e.css({top:n.offset().top-(e.outerHeight()+5),left:t}),e.addClass("show")},mouseleave:function(){e!==undefined&&(e.remove(),e.removeClass("show"))}})})},$.fn.pf_customizer_refresh=function(){return this.each(function(){var e=$(this),t=e.closest(".pf-customize-complex");if(t.length){var n=t.find(":input"),i=t.data("unique-id"),a=t.data("option-id"),o=n.serializeObjectPF(),r=$.isEmptyObject(o)?"":o[i][a],f=window.wp.customize.control(i+"["+a+"]");f.setting._value=null,f.setting.set(r)}else e.find(":input").first().trigger("change");$(document).trigger("pf-customizer-refresh",e)})},$.fn.pf_customizer_listen=function(e){var t=$.extend({closest:!1},e);return this.each(function(){if(window.wp.customize!==undefined){var e=t.closest?$(this).closest(".pf-customize-complex"):$(this),n=e.find(":input"),i=e.data("unique-id"),a=e.data("option-id");i!==undefined&&n.on("change keyup",PF.helper.debounce(function(){var t=e.find(":input").serializeObjectPF(),n=!$.isEmptyObject(t)&&t[i]&&t[i][a]?t[i][a]:"";window.wp.customize.control(i+"["+a+"]").setting.set(n)},250))}})},$(document).on("expanded",".control-section-pf",function(){var e=$(this);if(e.hasClass("open")&&!e.data("inited")){var t=e.find(".pf-customize-field"),n=e.find(".pf-customize-complex");t.length&&(e.pf_dependency(),t.pf_reload_script({dependency:!1}),n.pf_customizer_listen()),e.data("inited",!0)}}),PF.vars.$window.on("resize pf.resize",PF.helper.debounce(function(e){var t=navigator.userAgent.indexOf("AppleWebKit/")>-1?PF.vars.$window.width():window.innerWidth;t<=782&&!PF.vars.onloaded&&($(".pf-section").pf_reload_script(),PF.vars.onloaded=!0)},200)).trigger("pf.resize"),$.fn.pf_widgets=function(){this.length&&($(document).on("widget-added widget-updated",function(e,t){t.find(".pf-fields").pf_reload_script()}),$(".widgets-sortables, .control-section-sidebar").on("sortstop",function(e,t){t.item.find(".pf-fields").pf_reload_script_retry()}),$(document).on("click",".widget-top",function(e){$(this).parent().find(".pf-fields").pf_reload_script()}))},$.fn.pf_reload_script_retry=function(){return this.each(function(){var e=$(this);e.data("inited")&&e.children(".pf-field-wp_editor").pf_field_wp_editor()})},$.fn.pf_taxonomies=function(){return this.each(function(){var e=$(this),t=e.find(".pf-taxonomy-wrap-nav"),n=e.closest(".pf-content").prev(".pf-nav-metabox").attr("data-unique"),i=e.attr("data-id");$(this).find(".pf-taxonomy-content-tab .btn-select-all").on("click",function(e){e.preventDefault(),$(this).parent().find("input[type='checkbox']").prop("checked",!0)}),t.find(".pf-taxonomy-nav-tab").on("click",function(e){e.preventDefault();var t=$(this).attr("data-id-content");$(this).closest(".pf-taxonomy-wrap-nav").children(".pf-taxonomy-nav").removeClass("pf-taxonomy-nav-active"),$(this).parent().addClass("pf-taxonomy-nav-active"),$(this).closest(".pf-taxonomy-wrap").find(".pf-taxonomy-content-tab").css("display","none"),$(this).closest(".pf-taxonomy-wrap").find(".pf-taxonomy-content-tab-id-"+t).css("display","block"),PF.helper.set_cookie("pf-lasttab-taxonomies-id-"+i+"-"+n,t)}),e.find("textarea").length>0&&e.find(".pf-taxonomy-content .pf-taxonomy-content-tab").each(function(){var e=$(this).children(".tag-editor").attr("placeholder")||"",t=$(this).children(".tag-editor").attr("ajax")||null,n=$(this).children(".tag-editor").attr("data-cpt")||null;$(this).children(".tag-editor").tagEditor({beforeTagSave:function(e,t,n,i,a){return a+"|"+e.attr("data-cpt")},forceLowercase:!1,placeholder:e,autocomplete:{delay:0,position:{collision:"flip"},source:function(e,i){if(!t)return{};window.wp.ajax.post("pf-taxonomy-ajax",{tax:n,s:e.term}).done(function(e){console.log("data: ",e),i($.map(e,function(e){return console.log(e),{value:e.name,label:e.name}}))}).fail(function(e){console.log(e)})}}})}),$(this).find(".pf-taxonomy-content-tab .pf-taxonomy-selected-all .pf--button").on("click",function(e){$(this).find("input[type='radio']").val()?$(this).parent().parent().next(".pf-taxonomy-collapse").css("display","none"):$(this).parent().parent().next(".pf-taxonomy-collapse").css("display","block").removeClass("hidden")})})},$.fn.pf_tags=function(){return this.each(function(){var e=$(this).find(".tag-editor"),t=e.attr("data-attributes-js")||"{}";e.tagEditor("destroy"),e.tagEditor(JSON.parse(t)),e.pf_reload_script()})},$.fn.pf_field_styling=function(){return this.each(function(){var e=$(this),t=e.find(".pf--styling__nav");t.find("li").on("click",function(){t.find("li").removeClass("active"),$(this).addClass("active");var e=$(this).attr("data-id");t.closest(".pf--styling").find(".pf--styling__wrap").addClass("hidden"),t.closest(".pf--styling").find(".pf--styling__wrap_"+e).removeClass("hidden")}),$(".pf--styling__tab").find("li").on("click",function(){var e=$(this).closest(".pf--styling__wrap");e.find(".pf--styling__tab li").removeClass("active"),$(this).addClass("active");var t=$(this).attr("data-id");e.find(".pf--block").css("display","none"),e.find(".pf--block.pf--tabs__"+t+"_content").css("display","block")});var n=null;e.find("textarea").each(function(){if("function"==typeof CodeMirror){var t=e.find(".CodeMirror"),i=$(this),a=i.data("editor");if(t.length,n=CodeMirror.fromTextArea(i[0],a),"default"!==a.theme&&-1===PF.vars.code_themes.indexOf(a.theme)){var o=$("<link>");$("#pf-codemirror-css-2").after(o),o.attr({rel:"stylesheet",id:"pf-codemirror-2-"+a.theme+"-css",href:a.cdnURL+"/theme/"+a.theme+".min.css",type:"text/css",media:"all"}),PF.vars.code_themes.push(a.theme)}CodeMirror.modeURL=a.cdnURL+"/mode/%N/%N.min.js",CodeMirror.autoLoadMode(n,a.mode),n.on("change",function(e,t){i.val(n.getValue()).trigger("change")}),n.refresh()}}),e.find(".pf--tabs__custom").on("click",function(){"function"==typeof CodeMirror&&e.find(".CodeMirror").each(function(e,t){t.CodeMirror.refresh()})})})},$.fn.pf_select2=function(){return this.each(function(){var e=$(this);e.attr("multiple");e.select2()})},$.fn.pf_autocomplete=function(){return this.each(function(){var e=$(this),t=e.find(".pf-search-post-inputs-wrap .pf-search-input"),n=e.find(".pf-search-post-inputs-wrap .pf-search-input-value"),i=e.find(".pf-search-post-inputs-wrap .pf-search-input-data"),a=e.find(".pf-search-post-inputs-wrap .pf-search-select"),o=e.find(".pf-search-post-inputs-wrap .pf-search-post-button"),r=e.find(".pf-search-post-results"),f=e.find(".pf-search-post-values"),s=e.find(".pf-search-post-results"),d=$(this).find(".pf-search-post-nonce").val(),l=e.find(".pf-search-post-image-default").val(),c=e.find(".pf-search-post-is-image").val(),p=e.find(".pf-search-post-is-filter").val(),h=e.find(".pf-search-post-is-sortable").val();t.keydown(function(e){if(13==e.keyCode)return e.preventDefault(),!1}),t.autocomplete({source:function(e,t){var n=a.length?a.val():null;jQuery.ajax({type:"post",dataType:"json",url:ajaxurl,data:"action=pf-search-post-ajax&nonce="+d+"&q="+e.term+"&cpt="+n+"&exclude="+f.val().replace("undefined","")+"&filter="+p,success:function(e){console.log(e),t($.map(e.data,function(e,t){return{label:e.title,value:parseInt(e.id),image:e.image}}))}})},select:function(e,a){return"number"==typeof a.item.value?(n.val(a.item.value),t.val(a.item.label),i.val(a.item.value+"|"+a.item.label+"|"+a.item.image)):(n.val(0),t.val(""),i.val("")),!1},minLength:3,autoFocus:!0,focus:function(e,t){return!1},fail:function(e,t,n){console.log(e),console.log(t),console.log(n)},appendTo:e.find(".pf-search-post-custom-result-wrap"),position:{my:"right-0 top+30",at:"right top"}}).data("ui-autocomplete")._renderItem=function(e,t){e.addClass("pf-autocomplete-item"),t.image!==undefined&&t.image||(t.image=l);var n="";return 0!=c&&(n="<div class='pf-autocomplete-item-img'><img src='"+t.image+"' /></div>"),$("<li/>").data("ui-autocomplete-item",t).append(n).append("<div class='pf-autocomplete-item-content'><p>"+t.label+"</p></div>").appendTo(e)},o.on("click",function(e){if(e.preventDefault(),0!=n.val()){var a=i.val().split("|"),f=a[0],s=a[1],d=a[2];d!==undefined&&d||(d=l);var p="";0!=c&&(p='<div class="pf-search-post-item-index-img"><img src="'+d+'" /></div>');var u="";0!=h&&(u='<i class="pf-sp-sort fa fa-arrows ui-sortable-handle"></i>'),$('<li class="pf-search-post-item-index pf-search-post-item-id-'+f+'">').append(p).append('<div class="pf-autocomplete-item-content"><p>'+s+"</p></div>").append('<div class="pf-search-post-helper">'+u+'<i data-id="'+f+'" class="pf-sp-remove fa fa-times"></i></div>').append("</li>").appendTo(r),n.val(""),t.val(""),i.val("");var v=o.closest(".pf--search-post-wrap").find(".pf-search-post-values");v.val(v.val()+","+f)}}),$(document).on("click",".pf-search-post-results .pf-search-post-item-index .pf-sp-remove",function(){var e=$(this).attr("data-id"),t=f.val(),n=t.split(","),i="";for(let t=0;t<n.length;t++){const a=n[t];a!=e&&(i+=a+",")}f.val(i),$(this).closest(".pf-search-post-item-index").remove()}),0!=h&&s.sortable({axis:"y",handle:".pf-sp-sort",helper:"original",cursor:"move",placeholder:"widget-placeholder",start:function(e,t){},update:function(e,t){u()}});var u=function(){var e="";$(s).children(".pf-search-post-item-index").each(function(){e+=$(this).attr("data-id")+","}),f.val("").val(e)}})},$.fn.pf_reload_script=function(e){var t=$.extend({dependency:!0},e);return this.each(function(){var e=$(this);e.data("inited")||(e.children(".pf-field-accordion").pf_field_accordion(),e.children(".pf-field-repeater").pf_field_repeater(),e.children(".pf-field-checkbox").find(".pf-checkbox").pf_checkbox(),e.children(".pf-field-group").pf_field_group(),e.children(".pf-field-tab").pf_field_tab(),e.children(".pf-field-fieldset").pf_field_fieldset(),e.children(".pf-field-upload").pf_field_upload(),e.children(".pf-field-media").pf_field_media(),e.children(".pf-field-gallery").pf_field_gallery(),e.children(".pf-field-code_editor").pf_field_code_editor(),e.children(".pf-field-wp_editor").pf_field_wp_editor(),e.children(".pf-field-slider").pf_field_slider(),e.children(".pf-field-background").pf_field_background(),e.children(".pf-field-typography").pf_field_typography(),e.children(".pf-field-spinner").pf_field_spinner(),e.children(".pf-field-sorter").pf_field_sorter(),e.children(".pf-field-sortable").pf_field_sortable(),e.children(".pf-field-switcher").pf_field_switcher(),e.children(".pf-field-icon").pf_field_icon(),e.children(".pf-field-date").pf_field_date(),e.children(".pf-field-backup").pf_field_backup(),e.children(".pf-field-taxonomies").pf_taxonomies(),e.children(".pf-field-tag").pf_tags(),e.children(".pf-field-styling").pf_field_styling(),e.children(".pf-field-border").find(".pf-color").pf_color(),e.children(".pf-field-background").find(".pf-color").pf_color(),e.children(".pf-field-color").find(".pf-color").pf_color(),e.children(".pf-field-color_group").find(".pf-color").pf_color(),e.children(".pf-field-link_color").find(".pf-color").pf_color(),e.children(".pf-field-typography").find(".pf-color").pf_color(),e.children(".pf-field-styling").find(".pf-color").pf_color(),e.children(".pf-field-palette").find(".pf-siblings").pf_siblings(),e.children(".pf-field-image_select").find(".pf-siblings").pf_siblings(),e.children(".pf-field-button_set").find(".pf-siblings").pf_siblings(),e.children(".pf-field-taxonomies").find(".pf-siblings").pf_siblings(),e.children(".pf-field").find("[data-tooltip]").pf_help(),e.children(".pf-field-select").find(".pf-chosen").pf_chosen(),e.children(".pf-field-select2").find("select").pf_select2(),e.children(".pf-field-search_post").pf_autocomplete(),t.dependency&&e.pf_dependency(),e.data("inited",!0),$(document).trigger("pf-reload-script",e))})},$(document).ready(function(){$(".pf-save").pf_save(),$(".pf-confirm").pf_confirm(),$(".pf-expand-all").pf_expand_all(),$(".pf-search").pf_search(),$(".pf-sticky-header").pf_sticky(),$(".pf-shortcode").pf_shortcode(),$(".pf-nav-options").pf_nav_options(),$(".pf-nav-metabox").pf_nav_metabox(),$(".pf-page-templates").pf_page_templates(),$(".pf-post-formats").pf_post_formats(),$(".pf-onload").pf_reload_script(),$(".widget").pf_widgets()})})(jQuery,window,document);